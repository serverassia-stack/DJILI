@echo off
chcp 65001 >nul
title ุจูุงุก ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช ุงููุชูุฏู

echo.
echo ========================================
echo    ๐ ุจูุงุก ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช ุงููุชูุฏู
echo ========================================
echo.

:: ุงูุชุญูู ูู ุชุซุจูุช Python
python --version >nul 2>&1
if errorlevel 1 (
    echo โ Python ุบูุฑ ูุซุจุช ุนูู ุงููุธุงู!
    echo ูุฑุฌู ุชุซุจูุช Python 3.6 ุฃู ุฃุนูู ูู:
    echo https://www.python.org/downloads/
    pause
    exit /b 1
)

:: ุงูุชุญูู ูู ุชุซุจูุช PyInstaller
python -c "import pyinstaller" 2>nul
if errorlevel 1 (
    echo ๐ฆ ุชุซุจูุช PyInstaller...
    pip install pyinstaller
    if errorlevel 1 (
        echo โ ูุดู ุชุซุจูุช PyInstaller!
        pause
        exit /b 1
    )
)

:: ุฅูุดุงุก ูุฌูุฏ ุงูุจูุงุก
if not exist "build" mkdir build
if not exist "dist" mkdir dist

echo.
echo ๐จ ุจุฏุก ุจูุงุก ุงูุชุทุจูู...
echo.

:: ุจูุงุก ุงูุชุทุจูู
pyinstaller --onefile --windowed --name "ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช" --icon=app_icon.ico main.py

if errorlevel 1 (
    echo.
    echo โ ูุดู ุจูุงุก ุงูุชุทุจูู!
    echo ูุฑุฌู ุงูุชุญูู ูู ุงูุฃุฎุทุงุก ุฃุนูุงู.
    pause
    exit /b 1
)

:: ูุณุฎ ุงููููุงุช ุงูุถุฑูุฑูุฉ
echo.
echo ๐ ูุณุฎ ุงููููุงุช ุงููุณุงุนุฏุฉ...
xcopy *.json dist\ /Y >nul 2>&1
xcopy *.md dist\ /Y >nul 2>&1
xcopy *.txt dist\ /Y >nul 2>&1

:: ุฅูุดุงุก ููู ุชุดุบูู ุฅุถุงูู
echo @echo off > dist\ุชุดุบูู.bat
echo chcp 65001 >nul >> dist\ุชุดุบูู.bat
echo title ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช ุงููุชูุฏู >> dist\ุชุดุบูู.bat
echo echo. >> dist\ุชุดุบูู.bat
echo echo ======================================== >> dist\ุชุดุบูู.bat
echo echo    ๐ ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช ุงููุชูุฏู >> dist\ุชุดุบูู.bat
echo echo ======================================== >> dist\ุชุดุบูู.bat
echo echo. >> dist\ุชุดุบูู.bat
echo start ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช.exe >> dist\ุชุดุบูู.bat
echo exit >> dist\ุชุดุบูู.bat

echo.
echo ========================================
echo    โ ุชู ุงูุจูุงุก ุจูุฌุงุญ!
echo ========================================
echo.
echo ๐ ุงููููุงุช ุงูููุฌูุฏุฉ ูู ูุฌูุฏ 'dist':
echo    - ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช.exe      (ุงูุชุทุจูู ุงูุฑุฆูุณู)
echo    - ุชุดุบูู.bat               (ููู ุชุดุบูู ุจุฏูู)
echo    - *.json                  (ูููุงุช ุงูุฅุนุฏุงุฏุงุช)
echo    - README.md               (ุฏููู ุงูุงุณุชุฎุฏุงู)
echo.
echo ๐ ููููู ุงูุขู ุชุดุบูู "ูุฏูุฑ ุงูุงุดุชุฑุงูุงุช.exe"
echo.
echo โ๏ธ  ููุงุญุธุงุช:
echo    - ุงูุชุทุจูู ูุง ูุญุชุงุฌ ุชุซุจูุชุ ุดุบูู ุงูููู ูุจุงุดุฑุฉ
echo    - ุงูุจูุงูุงุช ุชุญูุธ ุชููุงุฆูุงู ูู ูุฌูุฏ ุงููุณุชุฎุฏู
echo    - ูุฏุนู ุงูุชุทุจูู Windows 7/8/10/11
echo.

pause
